import{r as p,j as e}from"./index-DkZXbipC.js";import{F as C,c as E,a as j,b as f,E as y,d as N}from"./index.esm-Chxl36zW.js";import{r as b,E as _}from"./ErrorHandler-M6Bwl2ep.js";const L=E({url_:N().max(100,"URLにしては長すぎます").required("URLを入力して下さい")}),R=async(i,l,r)=>{const t=document.getElementById("showPng"),a=document.getElementById("imageURL"),s=document.getElementById("showWords");if(s!=null)for(s.style.display="none";s.firstChild;)s.removeChild(s.lastChild);if(t!=null)for(;t.firstChild;)t.removeChild(t.lastChild);if(a!=null)for(;a.firstChild;)a.removeChild(a.lastChild);try{const o=await b("/api/blog-cloud/",JSON.stringify(i)),v=o.data.filepath,w=o.data.words.slice(0,9);let m=document.createElement("img");m.alt="ブログイメージ",m.src=v;let n=document.createElement("a");n.innerText="画像を取得",n.href=v,n.download="page_img.png";var g=document.createElement("h3");g.innerText="出現ワード";var c=document.createElement("div");c.className="wordsList",w.map(x=>{var d=document.createElement("div");d.className="wordsList-row";var h=document.createElement("div"),u=document.createElement("div");h.className="word-title",u.className="word-numbers",h.innerText=`${x[0]} :`,u.innerText=`${x[1]}回`,c.appendChild(d),d.appendChild(h),d.appendChild(u)}),r(!1),s.appendChild(g),s.appendChild(c),t.appendChild(m),a.appendChild(n),s.style.display="block",l.resetForm({values:{url_:"",remove_:""}})}catch(o){_(o)}},P=({transferPage:i})=>{const[l,r]=p.useState(!1);return document.getElementById("showPng"),p.useEffect(()=>{i()},[]),p.useEffect(()=>{console.log(l?"now loading...":"not loading")},[l]),e.jsx(C,{initialValues:{url_:"",remove_:""},validationSchema:L,onSubmit:(t,a,...s)=>{r(!0),R(t,a,r)},children:e.jsxs("div",{className:"blogcloud-container",children:[e.jsx("div",{className:"blogcloud-form-container",children:e.jsxs(j,{className:"mx-auto w-80",children:[e.jsx("div",{className:"text-center",children:"URLを入力してください"}),e.jsx(f,{name:"url_",type:"url",placeholder:"https://",className:"form-control my-3"}),e.jsx(f,{name:"remove_",type:"text",placeholder:"除きたい単語をスペースで区切って入力",className:"form-control my-3"}),e.jsx("div",{className:"text-danger mb-3",children:e.jsx(y,{name:"url_"})}),e.jsx("div",{className:"text-center",children:e.jsx("button",{type:"submit",children:"イメージを取得"})})]})}),e.jsxs("div",{className:"showcase",id:"blogShowCase",children:[l&&e.jsx("div",{className:"blink",children:"画像生成中..."}),e.jsx("div",{id:"showPng"}),e.jsx("div",{id:"imageURL"}),e.jsx("div",{id:"showWords"})]})]})})};export{P as default};
